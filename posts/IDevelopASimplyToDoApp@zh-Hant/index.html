<!DOCTYPE html><html lang="zh-Hant"><head><meta charset="UTF-8"/><meta property="og:site_name" content="vickcoo"/><link rel="canonical" href="https://vickcoo.github.io/posts/IDevelopASimplyToDoApp@zh-Hant"/><meta name="twitter:url" content="https://vickcoo.github.io/posts/IDevelopASimplyToDoApp@zh-Hant"/><meta property="og:url" content="https://vickcoo.github.io/posts/IDevelopASimplyToDoApp@zh-Hant"/><title>æˆ‘é–‹ç™¼äº†ä¸€æ¬¾ç°¡å–®ä½†ä¹Ÿæœ‰ç´°ç¯€çš„ To-Do App | vickcoo</title><meta name="twitter:title" content="æˆ‘é–‹ç™¼äº†ä¸€æ¬¾ç°¡å–®ä½†ä¹Ÿæœ‰ç´°ç¯€çš„ To-Do App | vickcoo"/><meta property="og:title" content="æˆ‘é–‹ç™¼äº†ä¸€æ¬¾ç°¡å–®ä½†ä¹Ÿæœ‰ç´°ç¯€çš„ To-Do App | vickcoo"/><meta name="description" content="èªªæ˜äº†å¾ˆå¤šåœ¨é€™å€‹ App é–‹ç™¼æ™‚ä½¿ç”¨åˆ°çš„æŠ€è¡“ç´°ç¯€ï¼Œé©åˆçµ¦å‰›å…¥é–€çš„äººåƒè€ƒã€‚"/><meta name="twitter:description" content="èªªæ˜äº†å¾ˆå¤šåœ¨é€™å€‹ App é–‹ç™¼æ™‚ä½¿ç”¨åˆ°çš„æŠ€è¡“ç´°ç¯€ï¼Œé©åˆçµ¦å‰›å…¥é–€çš„äººåƒè€ƒã€‚"/><meta property="og:description" content="èªªæ˜äº†å¾ˆå¤šåœ¨é€™å€‹ App é–‹ç™¼æ™‚ä½¿ç”¨åˆ°çš„æŠ€è¡“ç´°ç¯€ï¼Œé©åˆçµ¦å‰›å…¥é–€çš„äººåƒè€ƒã€‚"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-RLP9CFT7WK"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-RLP9CFT7WK');</script><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to vickcoo"/><meta name="twitter:image" content="https://vickcoo.github.io/images"/><meta property="og:image" content="https://vickcoo.github.io/images"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">vickcoo</a><p>iOS Developer</p><nav><ul><li><a href="/posts" class="selected">æ–‡ç« </a></li><li><a href="/recommendations">æ¨è–¦</a></li><li><a href="/message">ç•™è¨€ç‰ˆ</a></li><li><a href="/about">é—œæ–¼</a></li></ul></nav></div></header><div class="wrapper"><article><h1>æˆ‘é–‹ç™¼äº†ä¸€æ¬¾ç°¡å–®ä½†ä¹Ÿæœ‰ç´°ç¯€çš„ To-Do App</h1><div class="metadata"><ul class="tag-list"><li><a href="/tags/swift">swift</a></li></ul><span class="date">ç™¼ä½ˆæ–¼ Nov 7, 2023</span></div><div class="content"><h2>å‰è¨€</h2><blockquote><p>æˆ‘æ˜¯ vickcooï¼Œæ˜¯ä¸€åå‰›è¦è½‰è·æˆç‚º iOS å·¥ç¨‹å¸«çš„äººï¼Œæ‰€ä»¥æœ‰ä»»ä½•æ„è¦‹æƒ³æå‡ºæˆ‘éƒ½éå¸¸æ¨‚æ„ï¼</p></blockquote><p>ç‚ºä»€éº¼æˆ‘è¦å¯«é€™ä¸€ç¯‡æ–‡ç« <s>ï¼ˆaka. ç­†è¨˜ï¼‰</s>å‘¢ï¼Ÿå› ç‚ºå¦‚æ¨™é¡Œæˆ‘è¦é–‹ç™¼ä¸€å€‹å¾ˆç°¡å–®çš„ To Do Appï¼Œä¸€æ–¹é¢é€™æ˜¯å€‹å¾ˆå¥½æ‹¿ä¾†ç•¶åšç¬¬ä¸€å€‹ç·´æ‰‹çš„é¡Œæï¼Œä»¥åŠç‚ºäº†æ±‚è·æ‰€æº–å‚™çš„ï¼Œå› ç‚ºæˆ‘å®Œå…¨æ²’æœ‰ iOS é–‹ç™¼çš„å·¥ä½œç¶“é©—ï¼Œä»¥å‰éƒ½æ˜¯å¯« Web æ‰€ä»¥æƒ³è¦æœ‰ä½œå“å³ä½¿å®ƒä¸æ˜¯ä»€éº¼æœ‰å‰µæ„æˆ–æ˜¯è¤‡é›œçš„ç¨‹å¼ï¼Œä½†æ¯”èµ·å£é ­ä¸Šèªªæˆ‘æœƒäº†äº›ä»€éº¼ï¼Œä¸å¦‚æ‹¿å‡ºæ±è¥¿ä¾†å±•ç¾ä¹Ÿæ¯”è¼ƒæœ‰èªªæœåŠ›ï¼</p><p>æœ¬ç¯‡å°±æœƒä»‹ç´¹é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘èªç‚ºå€¼å¾—ç´€éŒ„ä¸‹ä¾›å¾Œäººä»¥åŠæˆ‘è‡ªå·±æœ‰éœ€è¦çš„æ™‚å¾Œå¯ä»¥åƒè€ƒã€‚</p><p>éœ€è¦çœ‹åŸå§‹ç¢¼çš„å¯ä»¥åˆ° GitHub <a href="https://github.com/vickcoo/odot">vickcoo/odot</a> ä¸­æŸ¥çœ‹ã€‚</p><h2>ç•«é¢å±•ç¤º</h2><img src="/images/SimpleToDoAppRecord/Showcase.jpeg" alt="Showcase"/><div class="caption">ä¸»ç•«é¢ / ç·¨è¼¯ç•«é¢ / è³‡æ–™æœªä¿å­˜æé†’</div><h2>åŠŸèƒ½ä»‹ç´¹ &amp; æŠ€è¡“ç´°ç¯€</h2><p>æŠ€è¡“å«é‡æˆ–è¨±ä¸å¤šï¼Œä¸éå°æ–¼ä¸ç†Ÿæ‚‰é€™äº›æŠ€è¡“æˆ–æ˜¯å‰›å…¥è¡Œçš„ iOS å·¥ç¨‹å¸«å€‘èƒ½æœ‰é»å¹«åŠ©ï¼Œä»¥ä¸‹æ˜¯å¤§ç¶±æ²’æœ‰é †åºçš„åˆ†åˆ¥ä»‹ç´¹å„å€‹æŠ€è¡“ç´°ç¯€ã€‚</p><ul><li>æ–°å¢å¾…è¾¨é …ç›®ï¼šæœƒæ–°é–‹é é¢ä¾†æä¾›ç•«é¢è¼¸å…¥è³‡æ–™ä¾†æ–°å¢</li><li>ç·¨è¼¯å¾…è¾¨é …ç›®ï¼šæœƒæ–°é–‹é é¢ä¾†æä¾›ç•«é¢è¼¸å…¥è³‡æ–™ä¾†æ›´æ–°ï¼Œè‹¥<strong>è³‡æ–™è®Šæ›´æœªå„²å­˜</strong>ä¸¦é»æ“Šå–æ¶ˆæœƒå½ˆå‡ºè¨Šæ¯è®“ä½ ç¢ºèªæ˜¯å¦è¦å„²å­˜æˆ–æ”¾æ£„ä¿®æ”¹</li><li>æé†’é€šçŸ¥ï¼šå¯ä»¥è¨­å®šæŒ‡å®šçš„æ—¥æœŸæ™‚é–“ä¾†ç™¼é€é€šçŸ¥</li><li>æŒä¹…åŒ–å­˜å„²ï¼šè³‡æ–™éƒ½æ˜¯å„²å­˜åœ¨æœ¬åœ°ç«¯ï¼ˆä½¿ç”¨è€…çš„è¨­å‚™ä¸Šï¼‰</li><li>å¤šåœ‹èªç³»ï¼šç›®å‰åªæ”¯æŒä¸­æ–‡ä»¥åŠè‹±æ–‡</li><li>è‡ªè¨‚ Cellï¼šé™¤äº†åŸºæœ¬çš„æ¨™é¡Œé‚„è‡ªè¨‚äº† CheckBox ä¾†æä¾›é»æ“Šå®Œæˆè©²å¾…è¾¨é …ç›®</li><li>å¾…è¾¨é …ç›®çš„ UITableView<ul><li>æ²’æœ‰ä»»ä½•è³‡ç±µæ™‚æœƒé¡¯ç¤ºæ–‡å­—ä¾†å‘Šè¨´ä½¿ç”¨è€…ï¼Œå¢å¼·ä½¿ç”¨è€…é«”é©—</li><li>åŸºæœ¬çš„æ’åºã€åˆªé™¤ã€æ–°å¢åŠŸèƒ½</li><li>éµç›¤ï¼š</li><li>æœƒè‡ªå‹•èª¿æ•´ç­†è¨˜æ¬„ä½çš„é«˜åº¦ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯éµç›¤å½ˆå‡ºä¸æœƒæ“‹åˆ°è¦è¼¸å…¥æ–‡å­—çš„åœ°æ–¹</li><li>é»æ“Šéè¼¸å…¥æ¡†çš„ä½ç½®<strong>éš±è—éµç›¤</strong></li><li>é»æ“Šå®Œæˆï¼ˆDoneï¼‰æŒ‰éˆ•<strong>éš±è—éµç›¤</strong></li><li>é»æ“Šæ–°å¢é€²åˆ°ç•«é¢æ™‚æœƒ<strong>è‡ªå‹•å°‡ç„¦é»æ”¾åœ¨æ¨™é¡Œæ¬„</strong>ï¼Œä¸¦ä¸”<strong>å½ˆå‡ºéµç›¤</strong></li><li>åœ¨æ¨™é¡Œ<strong>æ¬„é»æ“Šéµç›¤çš„ Next éµæœƒå°‡ç„¦é»æ”¾åœ¨ç­†è¨˜æ¬„</strong></li></ul></li></ul><ul><li>å…¶ä»–<ul><li>è½‰è·³åˆ°ç³»çµ±çš„è¨­å®š</li><li>NotificationCenter</li></ul></li></ul><h2>å¤§ç¶±</h2><p>æŠ€è¡“å«é‡æˆ–è¨±ä¸æ·±ï¼Œä¸éå°æ–¼ä¸ç†Ÿæ‚‰é€™äº›æŠ€è¡“æˆ–æ˜¯å‰›å…¥è¡Œçš„ iOS å·¥ç¨‹å¸«å€‘èƒ½æœ‰é»å¹«åŠ©ï¼Œä»¥ä¸‹æ˜¯å¤§ç¶±æ²’æœ‰é †åºçš„åˆ†åˆ¥ä»‹ç´¹å„å€‹æŠ€è¡“ç´°ç¯€ï¼Œå¯ä»¥åˆ©ç”¨ä¸‹é¢çš„ é—œéµå­—å»æ‰¾æ–‡ç« ä¸­ä½ æƒ³çœ‹çš„éƒ¨åˆ†ã€‚</p><ul><li>UITableView<ul><li>UITableViewDataSource</li><li>UITableViewDelegate</li><li>æ²’æœ‰è³‡æ–™æ™‚é¡¯ç¤ºæ–‡å­—</li></ul></li></ul><ul><li>å¤šåœ‹èªç³»</li><li>è·‘ Simulator æ™‚æ›´æ–¹ä¾¿çš„æ¸¬è©¦ä¸åŒèªè¨€</li><li>æœ¬åœ°ç«¯è³‡æ–™å„²å­˜</li><li>NotificationCenter ç›£è½äº‹ä»¶</li><li>éµç›¤è™•ç†<ul><li>å½ˆå‡ºéµç›¤</li><li>æ–‡å­—è¼¸å…¥æ¡†è¢«éµç›¤æ“‹ä½</li><li>éš±è—éµç›¤ï¼šåœ¨éµç›¤ä¸Šæ–¹æ–°å¢æŒ‰éˆ•</li><li>éš±è—éµç›¤ï¼šé»æ“Šç•«é¢å…¶é¤˜ç©ºç™½éƒ¨åˆ†</li></ul></li></ul><ul><li>ç™¼é€é€šçŸ¥</li><li>è½‰è·³åˆ°ç³»çµ±çš„è¨­å®š</li><li>åˆ©ç”¨ Button å¯¦ç¾ CheckBox åŠŸèƒ½</li></ul><h2>UITableView</h2><p>å…¥é–€é¦–å…ˆæœ€å¸¸æ¥è§¸çš„å¤§æ¦‚å°±å±¬ <a href="https://developer.apple.com/documentation/uikit/uitableview">UITableView</a> äº†å§ï¼Œä¸»è¦æœƒè¦éµå¾ª <a href="https://developer.apple.com/documentation/uikit/uitableviewdatasource">UITableViewDataSource</a> è·Ÿ <a href="https://developer.apple.com/documentation/uikit/uitableviewdelegate">UITableViewDelegate</a> ï¼Œè€Œé€™å…©å€‹ Protocol çš„è·è²¬åˆ†åˆ¥æ˜¯è² è²¬ä»€éº¼å‘¢ï¼Ÿ</p><h3>UITableViewDataSource</h3><p>å¦‚å®ƒçš„åå­—æ‰€ä»£è¡¨çš„å°±æ˜¯é—œæ–¼<strong>è³‡æ–™</strong>æ–¹é¢çš„è™•ç†ã€‚</p><p>å…¶ä¸­ä¹‹ä¸€å¿…é ˆè¦å¯¦ä½œçš„æ˜¯é€™å€‹ <code>cellForRowAt</code>ï¼Œå®ƒæ‰€è¦åšçš„æ˜¯å‘Šè¨´ UITableView ä½ è¦è®“ Cellï¼ˆæŒ‡çš„æ˜¯æ¯ä¸€è¡Œè³‡æ–™ï¼‰ æ€éº¼æ¨£å‘ˆç¾ä»¥åŠè¦ä»€éº¼è³‡æ–™ï¼Œæ¥ä¸‹ä¾†é€™å€‹ <code>numberOfRowInSection</code> ä¹Ÿå¿…é ˆè¦å¯¦ä½œï¼Œå®ƒè¦åšçš„äº‹å°±æ˜¯å‘Šè¨´ UITableView ä½ çš„ç•«é¢ä¸­è¦é¡¯ç¤ºå‡ºå¤šå°‘ç­†è³‡æ–™ã€‚</p><pre><code><span class="comment">// è¦å‘ˆç¾ä»€éº¼æ¨£çš„è³‡æ–™</span>
<span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, cellForRowAt indexPath: <span class="type">IndexPath</span>) -&gt; <span class="type">UITableViewCell</span>

<span class="comment">// è¦é¡¯ç¤ºçš„è³‡æ–™ç­†æ•¸</span>
<span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span>
</code></pre><h3>UITableViewDelegate</h3><p>å®ƒæ˜¯è² è²¬è™•ç†ä¸€äº›å° UITableView çš„æ“ä½œæ‰€è§¸ç™¼çš„äº‹ä»¶ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p><p>è¦å°è³‡æ–™åšæ’åºéœ€å¯¦ä½œ <code>moveRowAt</code>ï¼Œå¯ä»¥å¤šåˆ©ç”¨ Autocomplete è¼¸å…¥é—œéµå­— <code>moveRowAt</code>ï¼›è¦åˆªé™¤è³‡æ–™éœ€å¯¦ä½œ <code>commit</code>ï¼Œä¸€æ¨£å¯ä»¥è¼¸å…¥é—œéµå­— <code>commit</code>ã€‚</p><pre><code><span class="comment">// æ’åºè³‡æ–™</span>
<span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, moveRowAt sourceIndexPath: <span class="type">IndexPath</span>, to destinationIndexPath: <span class="type">IndexPath</span>)

<span class="comment">// åˆªé™¤è³‡æ–™</span>
<span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, commit editingStyle: <span class="type">UITableViewCell</span>.<span class="type">EditingStyle</span>, forRowAt indexPath: <span class="type">IndexPath</span>)
</code></pre><h3>ç•¶æ²’æœ‰è³‡æ–™æ™‚é¡¯ç¤ºæ–‡å­—</h3><blockquote><p>é€™å€‹åŠŸèƒ½çš„å¯¦ç¾æ˜¯åƒè€ƒé€™ç¯‡æ–‡ç«  <a href="https://medium.com/@mtssonmez/handle-empty-tableview-in-swift-4-ios-11-23635d108409">Handle Empty TableView in Swift 4 &amp; iOS 11</a></p></blockquote><p>é€™å€‹ä¸»è¦æ˜¯è®“ä½¿ç”¨è€…é«”é©—æ›´å¥½ä¸€é»ï¼Œæ²’æœ‰ä»»ä½•è³‡æ–™æ™‚è®“ä½¿ç”¨è€…çŸ¥é“ï¼Œæˆ–æ˜¯æä¾›è¨Šæ¯å‘Šè¨´ä»–å€‘è¦å»å“ªæ–°å¢è³‡æ–™ã€‚ä¸»è¦çš„æ¦‚å¿µæ˜¯ç•¶ UITableView æ²’æœ‰è³‡æ–™çš„æ™‚å€™è¨­å®šä¸€å€‹è‡ªè¨‚çš„ <code>UIView</code>ï¼Œæœ‰è³‡æ–™çš„æ™‚å€™å°±å°‡é€™å€‹è‡ªè¨‚çš„åˆªé™¤ã€‚</p><p>å¯¦ä½œä¸»è¦åˆ†å…©éƒ¨åˆ†ï¼Œå¹« <code>UITableView</code> æ“´å……å…©å€‹ Functionï¼š</p><ol><li><code>setEmptyView</code> å°±æ˜¯å»ºç«‹è‡ªè¨‚çš„ View è£¡é¢å¾ˆç°¡å–®å°±æ˜¯æ”¾å…©å€‹ <code>UILabel</code> ä¾†é¡¯ç¤ºæ–‡å­—</li><li><code>removeEmptyView</code> å°±æ˜¯æŠŠé€™å€‹ View åˆªé™¤</li></ol><pre><code><span class="keyword">extension</span> <span class="type">UITableView</span> {
    <span class="comment">/// Display a message on the `UITableView` center, notice you need to call `removeEmptyView()` when table hasn't any row.</span>
    <span class="keyword">func</span> setEmptyView(title: <span class="type">String</span>, message: <span class="type">String</span>) {
        <span class="keyword">let</span> backgroundView = <span class="type">UIView</span>()
        
        <span class="keyword">let</span> titleLabel = <span class="type">UILabel</span>()
        titleLabel.<span class="property">translatesAutoresizingMaskIntoConstraints</span> = <span class="keyword">false</span>
        titleLabel.<span class="property">text</span> = title
        titleLabel.<span class="property">font</span> = .<span class="call">systemFont</span>(ofSize: <span class="number">18</span>)
        titleLabel.<span class="property">textColor</span> = .<span class="dotAccess">label</span>
        backgroundView.<span class="call">addSubview</span>(titleLabel)
        
        <span class="keyword">let</span> messageLabel = <span class="type">UILabel</span>()
        messageLabel.<span class="property">translatesAutoresizingMaskIntoConstraints</span> = <span class="keyword">false</span>
        messageLabel.<span class="property">text</span> = message
        messageLabel.<span class="property">font</span> = .<span class="call">systemFont</span>(ofSize: <span class="number">16</span>)
        messageLabel.<span class="property">textColor</span> = .<span class="dotAccess">secondaryLabel</span>
        backgroundView.<span class="call">addSubview</span>(messageLabel)
        
        <span class="type">NSLayoutConstraint</span>.<span class="call">activate</span>([
            titleLabel.<span class="property">centerXAnchor</span>.<span class="call">constraint</span>(equalTo: backgroundView.<span class="property">centerXAnchor</span>),
            titleLabel.<span class="property">centerYAnchor</span>.<span class="call">constraint</span>(equalTo: backgroundView.<span class="property">centerYAnchor</span>, constant: -<span class="number">6</span>),
            messageLabel.<span class="property">centerXAnchor</span>.<span class="call">constraint</span>(equalTo: backgroundView.<span class="property">centerXAnchor</span>),
            messageLabel.<span class="property">centerYAnchor</span>.<span class="call">constraint</span>(equalTo: titleLabel.<span class="property">bottomAnchor</span>, constant: <span class="number">12</span>)
        ])
        
        <span class="keyword">self</span>.<span class="property">backgroundView</span> = backgroundView
    }
    
    <span class="comment">/// Clean the message that  you have set before by `setEmptyView(title: String, message: String)`</span>
    <span class="keyword">func</span> removeEmptyView() {
        <span class="keyword">self</span>.<span class="property">backgroundView</span> = <span class="keyword">nil</span>
    }
}
</code></pre><ol start="2"><li>ç¬¬äºŒå€‹è¦å¯¦ä½œçš„å°±æ˜¯ä½•æ™‚è¦é¡¯ç¤ºå‡ºé€™å€‹è‡ªè¨‚çš„ Viewï¼Œä½•æ™‚è¦åˆªé™¤ï¼Ÿæƒ³æƒ³çœ‹æˆ‘å€‘å‰é¢ä»‹ç´¹çš„ <code>UITableViewDataSource</code>ï¼Œé€™è£¡æ˜¯å¾ˆå¥½åˆ¤æ–·çš„åœ°æ–¹ï¼Œé‡é»åœ¨ç¬¬ 2 è¡Œåˆ°ç¬¬ 6 è¡Œï¼Œåˆ¤æ–·æœ‰æ²’æœ‰è³‡æ–™ä¾†æ±ºå®šè¦ä¸è¦é¡¯ç¤ºè‡ªè¨‚çš„ View</li></ol><pre><code><span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {
    <span class="keyword">if</span> myData.<span class="property">isEmpty</span> {
        tableView.<span class="call">setEmptyView</span>(title: title, message: message)
    } <span class="keyword">else</span> {
        tableView.<span class="call">removeEmptyView</span>()
    }

    <span class="keyword">return</span> myData.<span class="property">count</span>
}
</code></pre><img src="/images/SimpleToDoAppRecord/UITableView-EmptyView.png" alt="UITableView-EmptyView"/><div class="caption">æ²’æœ‰è³‡æ–™æ™‚é¡¯ç¤ºæ–‡å­—è³‡è¨Š</div><p><strong>å¦‚ä½•åˆ‡æ›ç·¨è¼¯æ¨¡å¼</strong></p><blockquote><p>é€™è£¡æŒ‡çš„æ˜¯åœ¨ iOS App ä¸­å¸¸è¦‹çš„ç·¨è¼¯æŒ‰éˆ•é»æ“Šå¾Œï¼Œå³é‚Šæœƒå‡ºç¾å¯ä»¥æ‹–å‹•æ’åºï¼Œå·¦é‚Šæœƒæœ‰ç´…è‰²æ¸›è™Ÿå¯ä»¥åˆªé™¤ã€‚</p></blockquote><p>å°‡ä½ è¨­å®šçš„æŒ‰éˆ•é»æ“Šäº‹ä»¶ä¸­æ”¾å…¥é€™æ®µç¨‹å¼ç¢¼ï¼Œå°±èƒ½å¤ åšç·¨è¼¯çš„åˆ‡æ›ã€‚</p><pre><code><span class="comment">// @IBOutlet var tableView: UITableView!</span>

<span class="keyword">if</span> tableView.<span class="property">isEditing</span> {
    tableView.<span class="call">setEditing</span>(<span class="keyword">false</span>, animated: <span class="keyword">true</span>)
} <span class="keyword">else</span> {
    tableView.<span class="call">setEditing</span>(<span class="keyword">true</span>, animated: <span class="keyword">true</span>)
}
</code></pre><img src="/images/SimpleToDoAppRecord/UITableView-Editing.png" alt="UITableView-Editing"/><div class="caption">UITableView ç·¨è¼¯æ¨¡å¼</div><h2>å¤šåœ‹èªç³» Localization</h2><p>é€™å€‹ App ä¹Ÿæœ‰å¤šèªè¨€æ”¯æŒï¼ˆä¹Ÿåªæœ‰ä¸­æ–‡è·Ÿè‹±æ–‡ï¼‰ã€‚</p><blockquote><p>ä½¿ç”¨çš„æ˜¯åœ¨ Xcode 15 æ¨å‡ºçš„ <a href="https://developer.apple.com/documentation/Xcode/localizing-and-varying-text-with-a-string-catalog">String Catalogs</a><br/> å¯ä»¥åœ¨ WWDC23 é€™å€‹å½±ç‰‡ä¸­ <a href="https://developer.apple.com/videos/play/wwdc2023/10165">Whatâ€™s new in Xcode 15</a> æŸ¥çœ‹é€™æ®µ <a href="https://developer.apple.com/videos/play/wwdc2023/10165/?time=270">Meet string catalogs</a>ã€‚</p></blockquote><p>è¨­å®šèµ·ä¾†å…¶å¯¦éå¸¸ç°¡å–®ï¼Œå¤§è‡´åˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼š</p><ol><li>åœ¨ <code>å°ˆæ¡ˆ &gt; Project &gt; Info &gt; Localizations</code> é€™è£¡æ–°å¢ä½ æƒ³è¦æ”¯æ´çš„èªè¨€</li><li>å…ˆæ–°å»ºä¸€å€‹ <code>String Catalog</code> çš„æª”æ¡ˆï¼Œæ¥è‘—åœ¨ç¨‹å¼ç¢¼ä¸­è¦æ”¯æ´å¤šåœ‹èªç³»çš„ String æ”¹æˆé€™æ¨£ï¼Œç•¶ä½ ç·¨è­¯ <code>(âŒ˜ + B)</code> æˆåŠŸå¾Œå°±æœƒåœ¨æª”æ¡ˆè£¡è‡ªå‹•å‡ºç¾ä½ æ‰€æœ‰è¨­å®šçš„ String äº†</li></ol><pre><code><span class="type">String</span>(localized: <span class="string">"Hello World!"</span>)
</code></pre><h3>è·‘ Simulator æ™‚æ›´æ–¹ä¾¿çš„æ¸¬è©¦ä¸åŒèªè¨€</h3><blockquote><p>åƒè€ƒ <a href="https://twitter.com/sarunw">@sarunw</a> çš„é€™ç¯‡æ–‡ç«  <a href="https://sarunw.com/posts/how-to-test-apps-in-other-languages-with-xcode-scheme/">How to quickly test apps in other languages with an Xcode scheme</a><br/> å¯ä»¥è¿½è¹¤ä»–çš„ X ( åŸ Twitter ) æ™‚å¸¸æœƒæœ‰ä¸€äº›é–‹ç™¼æ™‚å°æŠ€å·§çš„åˆ†äº« ğŸ‘‰ğŸ» <a href="https://twitter.com/sarunw">@sarunw</a></p></blockquote><p>åœ¨ Xcode ä¸Šæ–¹é»é¸ Schemeï¼ˆ ^ + 0ï¼‰ä¸¦è¤‡è£½ä¸€ä»½ï¼Œç„¶å¾Œåœ¨ç·¨è¼¯é€™å€‹ Scheme çš„ç•«é¢ä¸­æ‰¾åˆ° <code>Run &gt; Options &gt; App Language</code> è¨­å®šå¥½èªè¨€ï¼Œæ¥è‘—è·‘èµ·ä¾† <code>(âŒ˜ + R)</code> çš„æ™‚å€™å°±æœƒä¾ä½ é€™å€‹ Scheme è¨­å®šçš„èªè¨€å•Ÿå‹• Appäº†ã€‚</p><h2>æœ¬åœ°ç«¯è³‡æ–™å„²å­˜</h2><blockquote><p>åƒè€ƒ <a href="https://twitter.com/sarunw">@sarunw</a> çš„é€™ç¯‡æ–‡ç«  <a href="https://sarunw.com/posts/url-type-properties/">Better way to get paths to system directories in iOS 16</a></p></blockquote><p>å› ç‚º Apple ç‚ºäº†ç¢ºä¿åŸ·è¡Œéšæ®µçš„å®‰å…¨æ€§ï¼Œæ‰€ä»¥ iOS App çš„ç’°å¢ƒæ˜¯åŸºæ–¼ Sandbox çš„æ©Ÿåˆ¶å»å¯¦ç¾çš„ï¼Œæ‰€ä»¥æ¯å€‹ App éƒ½æœ‰è‡ªå·±ç¨ç«‹çš„è³‡æ–™å­˜å„²ç›®éŒ„ä¸æœƒè·Ÿå…¶å®ƒ App æ‰“æ¶ã€‚</p><p>æ‰€ä»¥é€™é‚Šæˆ‘å€‘ä½¿ç”¨ FileManager å–å¾— urlï¼Œé€™é‚Šä¹Ÿæä¾›åœ¨ iOS16 ä»¥å¾Œæä¾›æ›´ç°¡å–®çš„æ–¹å¼å–å¾—ç›®éŒ„ï¼Œå–å¾—ç›®éŒ„ä¹‹å¾Œå°±è¦è¨­å®šå¥½æˆ‘å€‘çš„æª”åä»¥åŠå‰¯æª”åï¼Œé€™é‚Šæˆ‘çš„æª”æ¡ˆæ˜¯ <code>todo</code> å‰¯æª”åæ˜¯ <code>json</code>ã€‚</p><pre><code><span class="comment">// å¸¸è¦‹å–å¾— url çš„æ–¹å¼</span>
<span class="keyword">let</span> documentsDirectory = <span class="keyword">try</span>? <span class="type">FileManager</span>.<span class="property">default</span>.<span class="call">url</span>(for: .<span class="dotAccess">documentDirectory</span>, in: .<span class="dotAccess">userDomainMask</span>, appropriateFor: <span class="keyword">nil</span>, create: <span class="keyword">false</span>)

<span class="comment">// iOS16 ä»¥å¾Œå¯ä»¥ç”¨æ›´ç°¡å–®çš„æ–¹å¼</span>
<span class="keyword">let</span> documentsDirectory = <span class="type">URL</span>.<span class="property">documentsDirectory</span>

<span class="comment">// è¨­å®šæª”åä»¥åŠå‰¯æª”å</span>
<span class="keyword">let</span> documentURL = directoryURL.<span class="call">appending</span>(components: <span class="string">"todo"</span>).<span class="call">appendingPathExtension</span>(<span class="string">"json"</span>)
</code></pre><img src="/images/SimpleToDoAppRecord/UrlDocumentDirectory.png" alt="UrlDocumentDirectory"/><div class="caption">directory</div><p>æ¥è‘—å°±æ˜¯ä½¿ç”¨ <code>JSONEncoder</code> å°‡è³‡æ–™ encode ç‚º json çš„è³‡æ–™ï¼Œé€™é‚Šè¦æ³¨æ„çš„æ˜¯è¦å¯ä»¥ encode è·Ÿ decode çš„è©±ï¼Œä¸ç®¡ä½ æ˜¯ç”¨ Struct æˆ– Class éƒ½éœ€è¦éµå¾ª <a href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types">Codable</a> é€™å€‹ Protocolï¼Œå¦å‰‡ Xcode å°±æœƒå ±éŒ¯çµ¦ä½ çœ‹äº†ã€‚</p><pre><code><span class="comment">// let items: [ToDoItem]</span>

<span class="keyword">func</span> save() {
    <span class="keyword">let</span> directoryURL = <span class="type">URL</span>.<span class="property">documentsDirectory</span>
    <span class="keyword">let</span> documentURL = directoryURL.<span class="call">appending</span>(components: <span class="string">"todo"</span>).<span class="call">appendingPathExtension</span>(<span class="string">"json"</span>)

    <span class="keyword">let</span> jsonEncoder = <span class="type">JSONEncoder</span>()
    <span class="keyword">let</span> data = <span class="keyword">try</span>? jsonEncoder.<span class="call">encode</span>(items)
    <span class="keyword">do</span> {
        <span class="keyword">try</span> data?.<span class="call">write</span>(to: documentURL)
    } <span class="keyword">catch</span> {
        logger.<span class="call">error</span>(<span class="string">"Couldn't write data of toDoItems to:</span> \(documentURL.<span class="property">absoluteString</span>)<span class="string">"</span>)
    }
}
</code></pre><p><code>jsonDecoder.decode</code> ç¬¬ä¸€å€‹åƒæ•¸è¦çµ¦çš„æ˜¯è³‡æ–™çš„å‹åˆ¥ï¼Œå› ç‚ºæˆ‘è¦å„²å­˜çš„è³‡æ–™æ˜¯ç”¨é™£åˆ—ï¼Œæ‰€ä»¥æœƒä½¿ç”¨ <code>Array&lt;YourDataType&gt;.self</code>æ³¨å¾Œæœ€å¾Œæœ‰ä¸€å€‹ <code>completed()</code> æ˜¯æä¾›å¤–éƒ¨å‘¼å«ä¸¦ä¸”è³‡æ–™è¼‰å…¥å®Œæˆå¾Œï¼Œåˆ©ç”¨å‚³å…¥ Closure ä¾†æ›´æ–°ç•«é¢ä¸­çš„è³‡æ–™ã€‚</p><pre><code><span class="comment">// struct ToDoItem {}</span>

<span class="keyword">func</span> load(completed: <span class="keyword">@escaping</span> () -&gt; ()) {
    <span class="keyword">let</span> directoryURL = <span class="type">URL</span>.<span class="property">documentsDirectory</span>
    <span class="keyword">let</span> documentURL = directoryURL.<span class="call">appending</span>(components: <span class="string">"todo"</span>).<span class="call">appendingPathExtension</span>(<span class="string">"json"</span>)

    <span class="keyword">let</span> jsonDecoder = <span class="type">JSONDecoder</span>()
    <span class="keyword">guard let</span> data = <span class="keyword">try</span>? <span class="type">Data</span>(contentsOf: documentURL) <span class="keyword">else</span> { <span class="keyword">return</span> }
    <span class="keyword">do</span> {
        <span class="keyword">try</span> items = jsonDecoder.<span class="call">decode</span>(<span class="type">Array</span>&lt;<span class="type">ToDoItem</span>&gt;.<span class="keyword">self</span>, from: data)
    } <span class="keyword">catch</span> {
        logger.<span class="call">error</span>(<span class="string">"Couldn't load data of toDoItems from:</span> \(documentURL.<span class="property">absoluteString</span>)<span class="string">"</span>)
    }
    <span class="call">completed</span>()
}
</code></pre><h2>NotificationCenter ç›£è½äº‹ä»¶</h2><p>åœ¨ Swift ä¸­ä½ å¦‚æœè¦ç›£è½ï¼ˆåˆç¨±è§€å¯Ÿ Observeï¼‰æŸäº›äº‹ä»¶å°±æœƒéœ€è¦ä½¿ç”¨ <a href="https://developer.apple.com/documentation/foundation/notificationcenter">NotificationCenter</a>ï¼Œä¾‹å¦‚éµç›¤æŒ‰éˆ• Return éµã€TextField è£¡çš„æ–‡å­—ç™¼ç”Ÿè®ŠåŒ–ç­‰ç­‰ã€‚</p><p>æ–°å¢è¦ç›£è½çš„äº‹ä»¶æˆ‘å€‘ä½¿ç”¨ <a href="https://developer.apple.com/documentation/foundation/notificationcenter/1415360-addobserver">addObserver</a> è¦çµ¦å‡ºå››å€‹åƒæ•¸ï¼š</p><ul><li>observerï¼šäº‹ä»¶è§¸ç™¼è¦åŸ·è¡Œ Function åœ¨å“ªå€‹ç‰©ä»¶</li><li>selectorï¼šäº‹ä»¶è§¸ç™¼è¦åŸ·è¡Œçš„ Function</li><li>nameï¼šç›£è½å“ªå€‹äº‹ä»¶</li><li>objectï¼šæŸ¥äº†æ–‡ä»¶é‚„æ˜¯çœ‹ä¸å¤ªæ‡‚ï¼Œç›®å‰æ˜¯ä½¿ç”¨ <code>nil</code></li></ul><pre><code><span class="comment">// addObserver æ‰€éœ€åƒæ•¸</span>
<span class="keyword">func</span> addObserver(
    <span class="keyword">_</span> observer: <span class="type">Any</span>,
    selector aSelector: <span class="type">Selector</span>,
    name aName: <span class="type">NSNotification</span>.<span class="type">Name</span>?,
    object anObject: <span class="type">Any</span>?
)

<span class="comment">// å¯¦éš›å‘¼å« `addObserver` çš„ä¾‹å­</span>
<span class="type">NotificationCenter</span>.<span class="property">default</span>.<span class="call">addObserver</span>(<span class="keyword">self</span>, selector: <span class="keyword">#selector</span>(adjustForKeyboard), name: <span class="type">UIResponder</span>.<span class="property">keyboardWillChangeFrameNotification</span>, object: <span class="keyword">nil</span>)
</code></pre><p>åˆªé™¤åŸæœ¬æ–°å¢è¦ç›£è½çš„äº‹ä»¶å‰‡æ˜¯ä½¿ç”¨ <code>removeObserver</code>ã€‚</p><pre><code><span class="type">NotificationCenter</span>.<span class="property">default</span>.<span class="call">removeObserver</span>(<span class="keyword">self</span>, name: <span class="type">UIResponder</span>.<span class="property">keyboardWillChangeFrameNotification</span>, object: <span class="keyword">nil</span>)
</code></pre><h2>éµç›¤è™•ç†</h2><p>é€™è£¡å¯ä»¥è™•ç†çš„ä¹Ÿå¾ˆå¤šï¼Œä¸»è¦ä¹Ÿæ˜¯æå‡ä½¿ç”¨è€…é«”é©—ã€‚</p><h3>å½ˆå‡ºéµç›¤</h3><p>é¦–å…ˆé€²æ–°å¢å¾…è¾¨é …ç›®çš„é é¢ï¼Œå°±ä»£è¡¨åä¹‹å…«ä¹æ˜¯è¦è¼¸å…¥è³‡æ–™å§ï¼Ÿæ‰€ä»¥å¯ä»¥è²¼å¿ƒçš„å°‡è¼¸å…¥çš„ç„¦é»åœ¨æ¨™é¡Œæ¬„ï¼ˆä¾‹å­ä¸­æ˜¯ç”¨<code>titleTextField</code>ï¼‰ä¸¦ä¸”ç›´æ¥å½ˆå‡ºéµç›¤ï¼Œè®“ä½¿ç”¨è€…æ‰“é–‹ç•«é¢å°±å¯ä»¥ç›´æ¥è¼¸å…¥æ–‡å­—ï¼Œè€Œä¸ç”¨å†å¤šé»æ“Šä¸€ä¸‹è¼¸å…¥æ¡†æ‰èƒ½è¼¸å…¥æ–‡å­—ã€‚</p><pre><code>titleTextField.<span class="call">becomeFirstResponder</span>()
</code></pre><h3>æ–‡å­—è¼¸å…¥æ¡†è¢«éµç›¤æ“‹ä½</h3><blockquote><p>åƒè€ƒ <a href="https://twitter.com/twostraws">@Paul Husdon</a> çš„é€™ç¯‡æ–‡ç«  <a href="https://www.hackingwithswift.com/read/19/7/fixing-the-keyboard-notificationcenter">Fixing the keyboard: NotificationCenter</a><br/> å¦‚æœä¸çŸ¥é“æ€éº¼é–‹å§‹å­¸ç¿’é–‹ç™¼ iOS App å¯ä»¥åˆ°ä»–çš„ç¶²ç«™ <a href="https://www.hackingwithswift.com/read">Hacking With Swift</a> æœ‰ä¸€ç³»åˆ—çš„å…¥é–€æ•™å­¸ï¼Œå½±ç‰‡æ–‡å­—çš„ç‰ˆæœ¬éƒ½æœ‰ï¼</p></blockquote><p>éœ€è¦åˆ©ç”¨å‰é¢èªªçš„ NotificationCenter ä¾†ç›£è½éµç›¤çš„äº‹ä»¶ï¼š</p><ul><li><code>keyboardWillChangeFrameNotification</code> å¯ä»¥ç›£è½éµç›¤çš„é¡¯ç¤ºã€éš±è—ã€æ—‹è½‰æ–¹å‘ç­‰ç­‰</li><li><code>keyboardWillHideNotification</code> æœƒéœ€è¦ä½¿ç”¨é€™å€‹äº‹ä»¶ï¼Œé€™é‚Šæ˜¯åƒè€ƒ <a href="https://twitter.com/twostraws">Paul Husdon</a> çš„<a href="https://www.hackingwithswift.com/read/19/7/fixing-the-keyboard-notificationcenter">æ–‡ç« </a>ï¼Œ<em>æ„æ€æ˜¯èªªä»–æ¸¬è©¦æ™‚ç™¼ç¾ <code>keyboardWillChangeFrameNotification</code> ä¸è¶³ä»¥æ•ç²åˆ°ç¡¬é«”éµç›¤é€£æ¥</em></li></ul><pre><code><span class="keyword">let</span> notificationCenter = <span class="type">NotificationCenter</span>.<span class="property">default</span>
notificationCenter.<span class="call">addObserver</span>(<span class="keyword">self</span>, selector: <span class="keyword">#selector</span>(adjustForKeyboard), name: <span class="type">UIResponder</span>.<span class="property">keyboardWillHideNotification</span>, object: <span class="keyword">nil</span>)
notificationCenter.<span class="call">addObserver</span>(<span class="keyword">self</span>, selector: <span class="keyword">#selector</span>(adjustForKeyboard), name: <span class="type">UIResponder</span>.<span class="property">keyboardWillChangeFrameNotification</span>, object: <span class="keyword">nil</span>)
</code></pre><p>æ¥è‘—å°±æ˜¯è¦åœ¨äº‹ä»¶è§¸ç™¼å¾Œè™•ç†è¼¸å…¥æ¡†è¢«é®æ“‹çš„å•é¡Œï¼Œ<code>keyboardFrameEndUserInfoKey</code></p><p>è¨­å®š <code>noteTextView</code> çš„ <code>contentInset</code> ä»£è¡¨æœƒå°‡ <code>noteTextView</code> çš„åº•éƒ¨å¾€ä¸Šæ¨æˆ‘æŒ‡æŒ‡å®šçš„è·é›¢ï¼Œè¨­å®šç‚º <code>.zero</code> å°±æ˜¯æ”¹å›é è¨­å€¼</p><p><code>scrollIndicatorInsets</code> çš„åŸç†ä¹Ÿä¸€æ¨£ï¼Œåªä¸éæ˜¯è®Šæˆè¨­å®šæ—é‚Šé¡¯ç¤ºçš„ Scroll Barã€‚</p><pre><code><span class="comment">// @IBOutlet var noteTextView: TextView!</span>

<span class="keyword">@objc func</span> adjustForKeyboard(<span class="keyword">_</span> notification: <span class="type">Notification</span>) {
    <span class="keyword">guard let</span> keyboardValue = notification.<span class="property">userInfo</span>?[<span class="type">UIResponder</span>.<span class="property">keyboardFrameEndUserInfoKey</span>] <span class="keyword">as</span>? <span class="type">NSValue</span> <span class="keyword">else</span> { <span class="keyword">return</span> }

    <span class="keyword">let</span> keyboardScreenEndFrame = keyboardValue.<span class="property">cgRectValue</span>
    <span class="keyword">let</span> keyboardViewEndFrame = view.<span class="call">convert</span>(keyboardScreenEndFrame, from: view.<span class="property">window</span>)

    <span class="keyword">if</span> notification.<span class="property">name</span> == <span class="type">UIResponder</span>.<span class="property">keyboardWillHideNotification</span> {
        noteTextView.<span class="property">contentInset</span> = .<span class="dotAccess">zero</span>
    } <span class="keyword">else</span> {
        noteTextView.<span class="property">contentInset</span> = <span class="type">UIEdgeInsets</span>(top: <span class="number">0</span>, left: <span class="number">0</span>, bottom: keyboardViewEndFrame.<span class="property">height</span> - view.<span class="property">safeAreaInsets</span>.<span class="property">bottom</span>, right: <span class="number">0</span>)
    }

    noteTextView.<span class="property">scrollIndicatorInsets</span> = noteTextView.<span class="property">contentInset</span>
    noteTextView.<span class="call">scrollRangeToVisible</span>(noteTextView.<span class="property">selectedRange</span>)
}
</code></pre><h3>éš±è—éµç›¤: åœ¨éµç›¤ä¸Šæ–¹æ–°å¢æŒ‰éˆ•</h3><p>åœ¨å¾ˆå¤š App ä¸­å¯ä»¥çœ‹åˆ°éµç›¤ä¸Šæ–¹éƒ½æœƒæœ‰ä¸€å€‹<code>å®Œæˆï¼ˆDoneï¼‰</code> çš„æŒ‰éˆ•ï¼Œé»æ“Šå¾Œå°±æœƒéš±è—éµç›¤ï¼Œé€™æ˜¯é€šéä¸€å€‹ <a href="https://developer.apple.com/documentation/uikit/uitoolbar">UIToolBar</a> ä¾†å¯¦ç¾ã€‚</p><p>é€™é‚Š <code>ToolBar</code> ç”±å…©å€‹ Item çµ„æˆ <code>doneButton</code> æ˜¯ä¸»è¦ç”¨ä¾†éš±è—éµç›¤çš„æŒ‰éˆ•ï¼Œ<code>flexSpace</code> ç”¨ä¾†å¡«å……ç©ºç™½å°‡ <code>doneButton</code> æ¨åˆ°æœ€å³é‚Šï¼Œæ¥è‘—å› ç‚ºæˆ‘æƒ³è®“æ‰€æœ‰è¼¸å…¥æ¡†éƒ½èƒ½é¡¯ç¤ºé€™å€‹æŒ‰éˆ•æ‰€ä»¥åˆ©ç”¨ <code>inputAccessoryView</code> ä¾†å°‡ ToolBar è¨­å®šä¸Šå»ã€‚</p><pre><code><span class="comment">// add a 'Done' button to provide a function for hide keyboard.</span>
<span class="keyword">let</span> toolbar = <span class="type">UIToolbar</span>()
<span class="keyword">let</span> flexSpace = <span class="type">UIBarButtonItem</span>(barButtonSystemItem: .<span class="dotAccess">flexibleSpace</span>, target: <span class="keyword">nil</span>, action: <span class="keyword">nil</span>)
<span class="keyword">let</span> doneButton = <span class="type">UIBarButtonItem</span>(title: <span class="type">String</span>(localized: <span class="string">"Done"</span>), style: .<span class="dotAccess">done</span>, target: <span class="keyword">self</span>, action: <span class="keyword">#selector</span>(hideKeyboardDoneButtonTapped))
toolbar.<span class="call">setItems</span>([flexSpace, doneButton], animated: <span class="keyword">true</span>)
toolbar.<span class="call">sizeToFit</span>()
noteTextView.<span class="property">inputAccessoryView</span> = toolbar
titleTextField.<span class="property">inputAccessoryView</span> = toolbar
</code></pre><h3>éš±è—éµç›¤: é»æ“Šç•«é¢å…¶é¤˜ç©ºç™½éƒ¨åˆ†</h3><p>æ–°å¢é»æ“Šæ‰‹å‹¢ä¾†éš±è—éµç›¤ã€‚</p><pre><code><span class="comment">// Hide keyboard when user tapped other position on the view.</span>
<span class="keyword">let</span> tap = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>.<span class="property">view</span>, action: <span class="keyword">#selector</span>(<span class="type">UIView</span>.<span class="call">endEditing</span>(<span class="keyword">_</span>:)))
<span class="keyword">self</span>.<span class="property">view</span>.<span class="call">addGestureRecognizer</span>(tap)
</code></pre><h2>ç™¼é€é€šçŸ¥</h2><blockquote><p>é€™è£¡çš„é€šçŸ¥è·Ÿ NotificationCenter æ˜¯ä¸ä¸€æ¨£çš„æ±è¥¿ï¼Œè«‹ä¸è¦ææ··å“¦ï¼</p></blockquote><p>é€™è£¡çš„ç¯„ä¾‹éƒ½æ˜¯ä½¿ç”¨æœ¬åœ°ç«¯ç™¼é€é€šçŸ¥ï¼Œè¦ <code>import UserNotifications</code>ï¼Œçµ„æˆé€šçŸ¥ä¸»è¦åˆ†æˆä¸‰å€‹éƒ¨åˆ†ï¼š <em> Content å…§å®¹ </em> Trigger è§¸ç™¼æ–¹å¼ * Request è«‹æ±‚ç™¼é€é€šçŸ¥</p><p>é¦–å…ˆè¦å»ºç«‹ä¸€å€‹ Content ä¹Ÿå°±æ˜¯é€šçŸ¥æ‰€è¦ç™¼å‡ºçš„å…§å®¹ï¼Œä½¿ç”¨ <a href="https://developer.apple.com/documentation/usernotifications/unmutablenotificationcontent">UNMutableNotificationContent</a>ã€‚</p><pre><code><span class="keyword">let</span> content = <span class="type">UNMutableNotificationContent</span>()
content.<span class="property">title</span> = <span class="string">"æ¨™é¡Œ"</span>
content.<span class="property">subtitle</span> = <span class="string">"å‰¯æ¨™é¡Œ"</span>
content.<span class="property">body</span> = <span class="string">"å…§å®¹"</span>
content.<span class="property">badge</span> = <span class="keyword">nil</span>
content.<span class="property">sound</span> = .<span class="dotAccess">default</span>
</code></pre><p>æ¥è‘— <a href="https://developer.apple.com/documentation/usernotifications/unnotificationtrigger">Trigger</a> æœ‰å››ç¨®å¯ä»¥é¸æ“‡ï¼Œæˆ‘å€‘ä½¿ç”¨ <a href="https://developer.apple.com/documentation/usernotifications/uncalendarnotificationtrigger">UNCalendarNotificationTrigger</a> åœ¨æŒ‡å®šçš„æ—¥æœŸæ™‚é–“ç™¼é€é€šçŸ¥](https://developer.apple.com/documentation/usernotifications/unmutablenotificationcontent)ã€‚</p><pre><code><span class="keyword">var</span> dateComponent = <span class="type">Calendar</span>.<span class="property">current</span>.<span class="call">dateComponents</span>([.<span class="dotAccess">year</span>, .<span class="dotAccess">month</span>, .<span class="dotAccess">day</span>, .<span class="dotAccess">hour</span>, .<span class="dotAccess">minute</span>], from: <span class="type">Date</span>())
<span class="keyword">let</span> trigger = <span class="type">UNCalendarNotificationTrigger</span>(dateMatching: dateComponent, repeats: <span class="keyword">false</span>)
</code></pre><p>æœ€å¾Œå°‡å‰é¢çš„ <code>Content</code> è·Ÿ <code>Trigger</code> çµ„åˆèµ·ä¾†æˆ <a href="https://developer.apple.com/documentation/usernotifications/unnotificationrequest">UNNotificationRequest</a>ã€‚</p><pre><code><span class="comment">// å°‡ Content è·Ÿ Trigger çµ„æˆ Request</span>
<span class="keyword">let</span> notificationID = <span class="type">UUID</span>().<span class="property">uuidString</span>
<span class="keyword">let</span> request = <span class="type">UNNotificationRequest</span>(identifier: notificationID, content: content, trigger: trigger)

<span class="comment">// å°‡é€šçŸ¥åŠ å…¥æ’ç¨‹ï¼Œä¸¦ä¸”åŠ å…¥éŒ¯èª¤è™•ç†</span>
<span class="type">UNUserNotificationCenter</span>.<span class="call">current</span>().<span class="call">add</span>(request) { error <span class="keyword">in
    if let</span> error = error {
        <span class="call">print</span>(<span class="string">"</span>\(error.<span class="property">localizedDescription</span>)<span class="string">"</span>)
    }
}
</code></pre><h2>è½‰è·³åˆ°ç³»çµ±çš„è¨­å®š App</h2><p>ç•¶ä½¿ç”¨è€…å®‰è£å®Œ App å¾Œï¼Œä½ å‘ä»–å€‘è«‹æ±‚ç™¼é€é€šçŸ¥çš„æ¬Šé™ä½†æ˜¯è¢«æ‹’çµ•äº†ï¼Œç„¶å¾ŒæŸä»–ä½¿ç”¨è€…ç”¨åˆ°çš„æŸäº›åŠŸèƒ½å¿…é ˆè¦æœ‰é€šçŸ¥æ¬Šé™æ‰èƒ½åŸ·è¡Œï¼Œé€™æ™‚å€™æä¾›ä¸€å€‹ç°¡å–®çš„æ–¹æ³•è®“ä½¿ç”¨è€…å¯ä»¥é»ä¸€ä¸‹å°±å¯ä»¥è·³åˆ°è¨­å®š App æ˜¯ä¸æ˜¯æœƒè®“ä»–å€‘æ›´é¡˜æ„å»çµ¦äºˆæ¬Šé™ã€‚</p><p>é‚£è¦å¦‚ä½•é”æˆå‘¢ï¼Ÿä¸»è¦æ ¸å¿ƒå°±å…©è¡Œè€Œå·²ï¼Œç¬¬ä¸€å€‹æ˜¯å–å¾—åœ¨ä½ çš„ App åœ¨<strong>è¨­å®š</strong>ä¸­çš„ URLï¼Œç¬¬äºŒå€‹å°±æ˜¯è·³è½‰åˆ°é‚£è£¡å»ï¼</p><pre><code><span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="type">UIApplication</span>.<span class="property">openSettingsURLString</span>)!
<span class="type">UIApplication</span>.<span class="property">shared</span>.<span class="call">open</span>(url)
</code></pre><h2>åˆ©ç”¨ Button å¯¦ç¾ CheckBox åŠŸèƒ½</h2><p>å› ç‚ºé€™ç¯‡æ–‡ç« æ˜¯èªªæ˜ ToDo App ç†æ‰€ç•¶ç„¶æœƒå¸Œæœ›æœƒæœ‰ä¸€å€‹ç°¡å–®çš„ CheckBox ä¾†è®“ä½¿ç”¨è€…é»æ“Šå®Œæˆå¾…è¾¨é …ç›®ã€‚ æ‰€ä»¥æˆ‘å€‘æœƒéœ€è¦å»ºç«‹å¥½ä¸€å€‹ UIButton å¾Œï¼Œåœ¨ Attributes Inspector ä¸­æŠŠ Type æ”¹æˆ Customï¼Œæ¥è‘—æŠŠ Image è¨­å®šç‚º <code>square</code>ï¼ˆé€™è£¡ä½¿ç”¨çš„æ˜¯ SF Symbolï¼‰ï¼Œç„¶å¾Œåœ¨æŠŠ State Config æ”¹æˆ Selected å¾Œå†æŠŠ Image è¨­å®šç‚º <code>checkmark.square</code>ï¼Œè¨˜å¾—ä¹Ÿè¦æŠŠè£¡é¢çš„æ–‡å­—æ¸…ç©ºå“¦ã€‚</p><p>é€™è£¡åšçš„äº‹å°±æ˜¯æŠŠ Button è¨­å®šå…©å€‹<strong>ä¸åŒç‹€æ…‹ä¸‹è¦é¡¯ç¤ºçš„</strong> Imageï¼Œ<code>square</code> ä»£è¡¨è‘—æœªè¢«å‹¾é¸çš„æ¡†ï¼Œ<code>checkmark.square</code> å‰‡ä»£è¡¨å·²å‹¾é¸çš„æ¡†ã€‚</p><p>è¨­å®šå®Œä¹‹å¾Œé»æ“Š Button ä¸¦ä¸æœƒç™¼ç”Ÿä»»ä½•æ”¹è®Šï¼Œå› ç‚ºæˆ‘å€‘åªæ˜¯å…ˆè¨­å®šå¥½å®ƒåœ¨ä»€éº¼ç‹€æ…‹è¦å‘ˆç¾çš„æ¨£å­è€Œå·²ï¼Œæ‰€ä»¥æˆ‘å€‘è¦åœ¨é»æ“ŠæŒ‰éˆ•çš„æ™‚å€™å»åšè™•ç†ã€‚</p><pre><code><span class="comment">// å‹¾é¸ï¼Œé¡¯ç¤º `checkmark.square` çš„ Image</span>
checkButton.<span class="property">isSelected</span> = <span class="keyword">true</span>

<span class="comment">// æœªå‹¾é¸ï¼Œé¡¯ç¤º `square` çš„ Image</span>
checkButton.<span class="property">isSelected</span> = <span class="keyword">false</span>
</code></pre><p>æœ€å¾Œé€™å€‹ä¹Ÿå¾ˆé‡è¦ï¼å› ç‚ºåœ¨æˆ‘çš„ App ä¸­é€™å€‹è‡ªè¨‚çš„ Button æ˜¯æ”¾åœ¨ Cell ä¸­ï¼Œæ‰€ä»¥æˆ‘å€‘è¦å¦‚ä½•çŸ¥é“ä½¿ç”¨è€…ç›®å‰é»æ“Šçš„ Cell çš„ IndexPath é€™æ˜¯ä¸€å€‹å•é¡Œï¼Œä½ å¯èƒ½æœƒå•ä¸å°±ä½¿ç”¨ <code>tableView.indexPathForSelectedRow</code> å°±å¯ä»¥äº†å—ï¼Œä½†æ˜¯æ³¨æ„æˆ‘å€‘æ˜¯é»æ“Š Cell è£¡çš„ Button æ‰€ä»¥ä¸¦ä¸æœƒæ›´æ–° <code>indexPathForSelectedRow</code>ï¼Œæ‰€ä»¥æä¾›äº†å¦ä¸€å€‹è§£æ±ºæ–¹æ¡ˆï¼Œå°±æ˜¯ä½¿ç”¨ <code>indexPath</code> åªè¦å‘å®ƒå‚³å…¥ä½ ç›®å‰é»æ“Šçš„ Cell å°±å¯ä»¥å–å¾— IndexPathã€‚</p><pre><code><span class="comment">// @IBOutlet var tableView: UITableView!
// func indexPath(for cell: UITableViewCell) -&gt; IndexPath?</span>

tableView.<span class="call">indexPath</span>(for: cell)
</code></pre><h2>å¾Œè¨˜</h2><p>å¯¦éš›ä¸Šå¯«é€™ç¯‡æ–‡ç« æ‡‰è©²æ¯”æˆ‘é–‹ç™¼çš„æ™‚é–“é‚„å¤šï¼Œé‚Šå¯«çš„æ™‚å€™ä¹Ÿæœƒç™¼ç¾å¥½åƒé‚„æœ‰å¾ˆå¤šä¸æ‡‚çš„ç´°ç¯€ï¼Œä¸éé€™å°±æ˜¯åˆ†äº«çš„å„ªé»å§ï¼è®“è‡ªå·±ç¢ºèªæœ‰æ²’æœ‰ä»€éº¼é‚„ä¸å¤ ç­è§£çš„éƒ¨åˆ†ï¼Œåˆèƒ½åˆ†äº«å‡ºå»è®“æœ‰éœ€è¦çš„äººçŸ¥é“ã€‚</p><p>å› ç‚ºå…¨éƒ¨å¯«åœ¨ä¸€ç¯‡è£¡å…§å®¹å¤ªéé•·ï¼Œæ‰€ä»¥çœç•¥äº†å¾ˆå¤šæ¯”è¼ƒç´°çš„å…§å®¹ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥åˆ° Githubï¼š<a href="https://github.com/vickcoo/odot">vickcoo/odot</a> ä¸Šçœ‹åŸå§‹ç¢¼ï¼Œæœ‰ä»€éº¼æ›´å¥½çš„åšæ³•æˆ–æ˜¯æœ‰å•é¡Œçš„åœ°æ–¹éƒ½å¯ä»¥ç•™è¨€æˆ–æ˜¯é€éå…¶ä»–æ–¹å¼å‘Šè¨´æˆ‘ã€‚</p><ul><li>Email: <a href="mailto:cwk91405133@gmail.com">cwk91405133@gmail.com</a></li></ul><ul><li>X: <a href="https://x.com/vickcoo">@vickcoo</a></li></ul></div></article><div class="comment-container"><script src="https://utteranc.es/client.js" repo="vickcoo/vickcoo.github.io.comment" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>